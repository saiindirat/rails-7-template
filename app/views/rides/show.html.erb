<h1>Ride Details</h1>

<p>
  <strong>From:</strong> <%= @ride.origin.presence || "Not provided" %><br>
  <strong>To:</strong> <%= @ride.destination.presence || "Not provided" %><br>
  <strong>Departure:</strong> <%= @ride.departure_time.strftime("%A %d %b, %I:%M %p") rescue "Not set" %><br>
  <strong>Seats:</strong> <%= @ride.available_seats || "N/A" %><br>
  <strong>Posted by:</strong> <%= @ride.user&.email || "Unknown" %><br>
  <strong>Notes:</strong> <%= @ride.notes.presence || "None" %>
</p>

<h3>Passengers:</h3>
<ul>
  <% if @ride.passengers.any? %>
    <% @ride.passengers.each do |p| %>
      <li><%= p.email %></li>
    <% end %>
  <% else %>
    <li>No passengers yet.</li>
  <% end %>
</ul>

<% if user_signed_in? %>
  <% if @ride.passengers.include?(current_user) %>
    <%= button_to "Leave Ride", ride_participant_path(ride_id: @ride.id), method: :delete, class: "btn btn-warning" %>
  <% else %>
    <%= button_to "Join Ride", ride_participants_path(ride_id: @ride.id), method: :post, class: "btn btn-success" %>
  <% end %>
<% else %>
  <p><em>Sign in to join this ride.</em></p>
<% end %>
