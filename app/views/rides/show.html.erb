<div style="max-width: 700px; margin: 40px auto; font-family: sans-serif; padding: 24px; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); background-color: #fff;">
  <h1 style="font-size: 2em; margin-bottom: 20px;">ğŸš— Ride Details</h1>

  <div style="line-height: 1.8; font-size: 1.1em;">
    <p><strong>From:</strong> <%= @ride.origin %></p>
    <p><strong>To:</strong> <%= @ride.destination %></p>
    <p><strong>Departure:</strong> <%= @ride.departure_time.strftime("%A %d %b, %I:%M %p") %></p>

    <p><strong>ğŸª‘ Seats:</strong>
      <%= @ride.available_seats %> total
      ğŸ”’ <%= @ride.spots_taken %> taken
      âœ… <%= @ride.seats_remaining %> remaining
    </p>

    <% if @ride.price.present? %>
      <p><strong>ğŸ’° Price:</strong> $<%= @ride.price %></p>
    <% end %>

    <p><strong>ğŸ“¸ Ride Image:</strong></p>
    <% if @ride.image.attached? %>
      <%= image_tag url_for(@ride.image), style: "max-width: 400px; border-radius: 8px; margin-top: 10px;" %>
    <% else %>
      <p><em>No image uploaded.</em></p>
    <% end %>

    <p><strong>Posted by:</strong> <%= @ride.user.email %></p>
    <p><strong>Notes:</strong> <%= @ride.notes.presence || "None" %></p>
  </div>

  <hr style="margin: 24px 0;">

  <h3>ğŸ‘¥ Passengers</h3>
  <ul>
    <% if @ride.passengers.any? %>
      <% @ride.passengers.each do |p| %>
        <li><%= p.email %></li>
      <% end %>
    <% else %>
      <li>No passengers yet.</li>
    <% end %>
  </ul>

  <% if user_signed_in? %>
    <div style="margin-top: 20px;">
      <% if @ride.passengers.include?(current_user) %>
        <%= button_to "Leave Ride", ride_participant_path(ride_id: @ride.id), method: :delete, class: "btn btn-warning", style: "padding: 10px 16px; background-color: #ffc107; color: black; border: none; border-radius: 4px; font-weight: bold; cursor: pointer;" %>
      <% elsif @ride.seats_remaining > 0 %>
        <%= button_to "Join Ride", ride_participants_path(ride_id: @ride.id), method: :post, class: "btn btn-success", style: "padding: 10px 16px; background-color: #28a745; color: white; border: none; border-radius: 4px; font-weight: bold; cursor: pointer;" %>
      <% else %>
        <p style="color: red; font-weight: bold;">No seats remaining.</p>
      <% end %>
    </div>
  <% else %>
    <p><em>Please sign in to join this ride.</em></p>
  <% end %>
</div>
