<div style="max-width: 700px; margin: 40px auto; font-family: sans-serif; padding: 24px; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); background-color: #fff;">
  <h1 style="font-size: 2em; margin-bottom: 20px;">ğŸš— Ride Details</h1>

  <div style="line-height: 1.8; font-size: 1.1em;">
    <p><strong>From:</strong> <%= @ride.origin.presence || "Not provided" %></p>
    <p><strong>To:</strong> <%= @ride.destination.presence || "Not provided" %></p>
    <p><strong>Departure:</strong> <%= @ride.departure_time.strftime("%A %d %b, %I:%M %p") rescue "Not set" %></p>

    <p><strong>ğŸª‘ Seats:</strong> <%= @ride.available_seats %> total 
      ğŸ”’ <%= @ride.spots_taken %> taken 
      âœ… <%= @ride.seats_remaining %> remaining
    </p>

    <p><strong>ğŸ’° Price:</strong> $<%= @ride.price %></p>

    <% if @ride.image.attached? %>
      <p><strong>ğŸ“¸ Image:</strong></p>
      <%= image_tag @ride.image.variant(resize_to_limit: [400, 300]), style: "margin-top: 8px;" %>
    <% end %>

    <p><strong>Posted by:</strong> <%= @ride.user&.email || "Unknown" %></p>
    <p><strong>Notes:</strong> <%= @ride.notes.presence || "None" %></p>
  </div>

  <hr style="margin: 24px 0;">

  <h3 style="margin-bottom: 10px;">ğŸ‘¥ Passengers</h3>
  <ul style="padding-left: 20px;">
    <% if @ride.passengers.any? %>
      <% @ride.passengers.each do |p| %>
        <li><%= p.email %></li>
      <% end %>
    <% else %>
      <li>No passengers yet.</li>
    <% end %>
  </ul>

  <% if user_signed_in? %>
    <div style="margin-top: 24px;">
      <% if @ride.passengers.include?(current_user) %>
        <%= button_to "Leave Ride", ride_participant_path(ride_id: @ride.id), method: :delete, style: "padding: 10px 16px; background-color: #ffc107; color: black; border: none; border-radius: 4px; font-weight: bold; cursor: pointer;" %>
      <% elsif @ride.seats_remaining > 0 %>
        <%= button_to "Join Ride", ride_participants_path(ride_id: @ride.id), method: :post, style: "padding: 10px 16px; background-color: #28a745; color: white; border: none; border-radius: 4px; font-weight: bold; cursor: pointer;" %>
      <% else %>
        <p style="color: red; font-weight: bold;">No seats remaining.</p>
      <% end %>
    </div>
  <% end %>
</div>
