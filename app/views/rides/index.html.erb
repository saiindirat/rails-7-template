<div style="max-width: 900px; margin: 40px auto; font-family: sans-serif;">

  <% if user_signed_in? %>
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
      <div>
        <p style="margin: 0;">ðŸ‘‹ Welcome, <strong><%= current_user.name.presence || current_user.email %></strong></p>
      </div>
      <div>
        <%= link_to "Logout", destroy_user_session_path, method: :delete, style: "color: white; background-color: #dc3545; padding: 8px 14px; border-radius: 6px; text-decoration: none; font-weight: bold;" %>
      </div>
    </div>
  <% end %>

  <h1 style="font-size: 2.4em; margin-bottom: 24px;">ðŸš˜ Shared Rides</h1>

  <% if user_signed_in? %>
    <%= link_to "âž• Post a new ride", new_ride_path, style: "display: inline-block; margin-bottom: 20px; color: white; background-color: #007bff; padding: 10px 16px; border-radius: 6px; text-decoration: none;" %>
  <% else %>
    <p><em>Sign in to post a ride.</em></p>
  <% end %>

  <table style="width: 100%; border-collapse: collapse; font-family: inherit; font-size: 1em;">
    <thead>
      <tr style="background-color: #f1f1f1;">
        <th style="padding: 12px; border: 1px solid #ddd; text-align: left;">From</th>
        <th style="padding: 12px; border: 1px solid #ddd; text-align: left;">To</th>
        <th style="padding: 12px; border: 1px solid #ddd; text-align: left;">Departure</th>
        <th style="padding: 12px; border: 1px solid #ddd; text-align: center;">Seats</th>
        <th style="padding: 12px; border: 1px solid #ddd; text-align: center;">Action</th>
      </tr>
    </thead>
    <tbody>
      <% @rides.each do |ride| %>
        <tr style="border-bottom: 1px solid #eee; transition: background-color 0.2s;" onmouseover="this.style.backgroundColor='#f9f9f9'" onmouseout="this.style.backgroundColor='white'">
          <td style="padding: 12px; border: 1px solid #ddd;"><%= ride.origin.presence || "â€”" %></td>
          <td style="padding: 12px; border: 1px solid #ddd;"><%= ride.destination.presence || "â€”" %></td>
          <td style="padding: 12px; border: 1px solid #ddd;"><%= ride.departure_time.strftime("%A %d %b, %I:%M %p") %></td>
          <td style="padding: 12px; border: 1px solid #ddd; text-align: center;"><%= ride.available_seats %></td>
          <td style="padding: 12px; border: 1px solid #ddd; text-align: center;">
            <%= link_to "View", ride_path(ride), style: "background-color: #28a745; color: white; padding: 6px 12px; border-radius: 4px; text-decoration: none;" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
